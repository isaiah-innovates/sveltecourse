import{n as q,R as Gt,H as Kt,s as At,p as ht,i as T,f as m,S as Yt,e as y,c as C,m as G,o as p,b as S,y as Jt,a as U,g as B,u as Lt,h as k,q as V,w as mt,z as Qt,A as Wt,B as Xt,x as Mt,k as ut,t as Z,d as tt,j as Dt,K as Zt,C as te,D as ee,E as Pt,v as at,F as le}from"../chunks/scheduler.wPVBEAb8.js";import{n as se,l as ne,h as ae,j as ie,S as Vt,i as jt,g as bt,b as Y,e as gt,t as H,c as zt,a as Ft,m as qt,d as Ht}from"../chunks/index.CJgKXyW2.js";import{e as dt,u as re,f as oe}from"../chunks/each.BCnoruRj.js";import{U as ue,g as ce,a as fe}from"../chunks/UserLink.DQJ_K7zy.js";import{p as he}from"../chunks/stores.d9zHZKZ3.js";import{u as de,a as pe,h as ct,i as ft,p as _e,f as _t,k as me,t as be}from"../chunks/firebase.Cz7nN3zP.js";import{c as ge}from"../chunks/index.CvmYViMX.js";import{w as ve}from"../chunks/index.Biuj0nYx.js";function ke(l,t,e,s){if(!t)return q;const a=l.getBoundingClientRect();if(t.left===a.left&&t.right===a.right&&t.top===a.top&&t.bottom===a.bottom)return q;const{delay:r=0,duration:o=300,easing:u=Gt,start:n=se()+r,end:f=n+o,tick:g=q,css:E}=e(l,{from:t,to:a},s);let i=!0,c=!1,d;function A(){E&&(d=ae(l,0,1,o,r,u,E)),r||(c=!0)}function I(){E&&ie(l,d),i=!1}return ne(N=>{if(!c&&N>=n&&(c=!0),c&&N>=f&&(g(1,0),I()),!i)return!1;if(c){const O=N-n,M=0+1*u(O/o);g(M,1-M)}return!0}),A(),g(0,1),I}function ye(l){const t=getComputedStyle(l);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:e,height:s}=t,a=l.getBoundingClientRect();l.style.position="absolute",l.style.width=e,l.style.height=s,Ce(l,a)}}function Ce(l,t){const e=l.getBoundingClientRect();if(t.left!==e.left||t.top!==e.top){const s=getComputedStyle(l),a=s.transform==="none"?"":s.transform;l.style.transform=`${a} translate(${t.left-e.left}px, ${t.top-e.top}px)`}}function we(l,{from:t,to:e},s={}){const a=getComputedStyle(l),r=a.transform==="none"?"":a.transform,[o,u]=a.transformOrigin.split(" ").map(parseFloat),n=t.left+t.width*o/e.width-(e.left+o),f=t.top+t.height*u/e.height-(e.top+u),{delay:g=0,duration:E=c=>Math.sqrt(c)*120,easing:i=ge}=s;return{delay:g,duration:Kt(E)?E(Math.sqrt(n*n+f*f)):E,easing:i,css:(c,d)=>{const A=d*n,I=d*f,N=c+d*t.width/e.width,O=c+d*t.height/e.height;return`transform: ${r} translate(${A}px, ${I}px) scale(${N}, ${O});`}}}function Tt(l,t,e){const s=l.slice();return s[9]=t[e],s[11]=e,s}const Ee=l=>({item:l&1,index:l&1}),It=l=>({item:l[9],index:l[11]});function xe(l){let t,e="No items";return{c(){t=y("p"),t.textContent=e,this.h()},l(s){t=C(s,"P",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-1jmwi8z"&&(t.textContent=e),this.h()},h(){p(t,"class","text-center my-12 text-lg font-bold")},m(s,a){T(s,t,a)},p:q,i:q,o:q,d(s){s&&m(t)}}}function Le(l){let t,e=[],s=new Map,a,r=dt(l[0]);const o=u=>u[9].id;for(let u=0;u<r.length;u+=1){let n=Tt(l,r,u),f=o(n);s.set(f,e[u]=Nt(f,n))}return{c(){t=y("ul");for(let u=0;u<e.length;u+=1)e[u].c();this.h()},l(u){t=C(u,"UL",{class:!0});var n=S(t);for(let f=0;f<e.length;f+=1)e[f].l(n);n.forEach(m),this.h()},h(){p(t,"class","list-none p-0 flex flex-col items-center")},m(u,n){T(u,t,n);for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(t,null);a=!0},p(u,n){if(n&63){r=dt(u[0]),bt();for(let f=0;f<e.length;f+=1)e[f].r();e=re(e,n,o,1,u,r,s,t,oe,Nt,null,Tt);for(let f=0;f<e.length;f+=1)e[f].a();gt()}},i(u){if(!a){for(let n=0;n<r.length;n+=1)H(e[n]);a=!0}},o(u){for(let n=0;n<e.length;n+=1)Y(e[n]);a=!1},d(u){u&&m(t);for(let n=0;n<e.length;n+=1)e[n].d()}}}function Nt(l,t){let e,s,a,r,o,u=q,n,f,g;const E=t[6].default,i=Jt(E,t,t[5],It);return{key:l,first:null,c(){e=y("li"),i&&i.c(),s=U(),this.h()},l(c){e=C(c,"LI",{class:!0,"data-index":!0,"data-id":!0,draggable:!0});var d=S(e);i&&i.l(d),s=B(d),d.forEach(m),this.h()},h(){p(e,"class","border-2 border-dashed border-transparent p-2 transition-all max-w-md w-full svelte-1fgegi8"),p(e,"data-index",a=t[11]),p(e,"data-id",r=t[9].id),p(e,"draggable","true"),Lt(e,"over",t[9].id===t[1]),this.first=e},m(c,d){T(c,e,d),i&&i.m(e,null),k(e,s),n=!0,f||(g=[V(e,"dragstart",Pe),V(e,"dragover",mt(t[2])),V(e,"dragleave",t[3]),V(e,"drop",mt(t[4]))],f=!0)},p(c,d){t=c,i&&i.p&&(!n||d&33)&&Qt(i,E,t,t[5],n?Xt(E,t[5],d,Ee):Wt(t[5]),It),(!n||d&1&&a!==(a=t[11]))&&p(e,"data-index",a),(!n||d&1&&r!==(r=t[9].id))&&p(e,"data-id",r),(!n||d&3)&&Lt(e,"over",t[9].id===t[1])},r(){o=e.getBoundingClientRect()},f(){ye(e),u()},a(){u(),u=ke(e,o,we,{duration:300})},i(c){n||(H(i,c),n=!0)},o(c){Y(i,c),n=!1},d(c){c&&m(e),i&&i.d(c),f=!1,Mt(g)}}}function De(l){let t,e,s,a;const r=[Le,xe],o=[];function u(n,f){var g;return(g=n[0])!=null&&g.length?0:1}return t=u(l),e=o[t]=r[t](l),{c(){e.c(),s=ht()},l(n){e.l(n),s=ht()},m(n,f){o[t].m(n,f),T(n,s,f),a=!0},p(n,[f]){let g=t;t=u(n),t===g?o[t].p(n,f):(bt(),Y(o[g],1,1,()=>{o[g]=null}),gt(),e=o[t],e?e.p(n,f):(e=o[t]=r[t](n),e.c()),H(e,1),e.m(s.parentNode,s))},i(n){a||(H(e),a=!0)},o(n){Y(e),a=!1},d(n){n&&m(s),o[t].d(n)}}}function it(l){return l.dataset.index?{...l.dataset}:it(l.parentNode)}function Pe(l){var e;const t=it(l.target);(e=l.dataTransfer)==null||e.setData("source",t==null?void 0:t.index.toString())}function Te(l,t,e){let{$$slots:s={},$$scope:a}=t,{list:r}=t,o=!1;const u=Yt();function n(i){var d;(d=i.target.dataset)==null||d.id;const c=it(i.target);e(1,o=(c==null?void 0:c.id)??!1)}function f(i){const c=it(i.target);o==c.id&&e(1,o=!1)}function g(i){var d;e(1,o=!1);const c=it(i.target);E({from:(d=i.dataTransfer)==null?void 0:d.getData("source"),to:c.index})}const E=({from:i,to:c})=>{const d=[...r];d[i]=[d[c],d[c]=d[i]][0],u("sort",d)};return l.$$set=i=>{"list"in i&&e(0,r=i.list),"$$scope"in i&&e(5,a=i.$$scope)},[r,o,n,f,g,a,s]}class Ie extends Vt{constructor(t){super(),jt(this,t,Te,De,At,{list:0})}}function Rt(l,t,e){const s=l.slice();return s[21]=t[e],s}function St(l){var yt,Ct,wt;let t,e="Edit your Profile",s,a,r,o,u,n,f=((yt=l[5])==null?void 0:yt.username)+"",g,E,i,c,d,A="Change photo",I,N,O,M,$,x,L,D,b,_=(Ct=l[5])!=null&&Ct.published?"Public profile":"Private profile",w,P,R,J,K,z,rt,et,F,pt,vt;z=new Ie({props:{list:(wt=l[5])==null?void 0:wt.links,$$slots:{default:[Ne,({item:h,index:v})=>({24:h,25:v}),({item:h,index:v})=>(h?16777216:0)|(v?33554432:0)]},$$scope:{ctx:l}}}),z.$on("sort",l[9]);function kt(h,v){return h[3]?Se:Re}let ot=kt(l),j=ot(l);return{c(){t=y("h1"),t.textContent=e,s=U(),a=y("div"),r=y("p"),o=Z(`Profile Link:
          `),u=y("a"),n=Z("https://kung.foo/"),g=Z(f),i=U(),c=y("div"),d=y("a"),d.textContent=A,I=U(),N=y("a"),O=Z("Edit Bio"),$=U(),x=y("form"),L=y("label"),D=y("span"),b=y("div"),w=Z(_),P=U(),R=y("input"),K=U(),zt(z.$$.fragment),rt=U(),j.c(),et=ht(),this.h()},l(h){t=C(h,"H1",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-zzls1r"&&(t.textContent=e),s=B(h),a=C(h,"DIV",{class:!0});var v=S(a);r=C(v,"P",{});var Q=S(r);o=tt(Q,`Profile Link:
          `),u=C(Q,"A",{href:!0,class:!0});var lt=S(u);n=tt(lt,"https://kung.foo/"),g=tt(lt,f),lt.forEach(m),Q.forEach(m),v.forEach(m),i=B(h),c=C(h,"DIV",{class:!0});var W=S(c);d=C(W,"A",{class:!0,href:!0,"data-svelte-h":!0}),G(d)!=="svelte-1hnlagx"&&(d.textContent=A),I=B(W),N=C(W,"A",{class:!0,href:!0});var st=S(N);O=tt(st,"Edit Bio"),st.forEach(m),W.forEach(m),$=B(h),x=C(h,"FORM",{class:!0});var nt=S(x);L=C(nt,"LABEL",{class:!0});var X=S(L);D=C(X,"SPAN",{class:!0});var Et=S(D);b=C(Et,"DIV",{class:!0,"data-tip":!0});var xt=S(b);w=tt(xt,_),xt.forEach(m),Et.forEach(m),P=B(X),R=C(X,"INPUT",{type:!0,class:!0}),X.forEach(m),nt.forEach(m),K=B(h),Ft(z.$$.fragment,h),rt=B(h),j.l(h),et=ht(),this.h()},h(){var h,v;p(t,"class","mx-2 text-2xl font-bold mt-8 mb-4 text-center"),p(u,"href",E=`/${(h=l[5])==null?void 0:h.username}`),p(u,"class","link link-accent"),p(a,"class","text-center mb-8"),p(d,"class","btn btn-outline btn-xs"),p(d,"href","/login/photo"),p(N,"class","btn btn-outline btn-xs"),p(N,"href",M=`/${l[5].username}/bio`),p(c,"class","text-center my-4"),p(b,"class","tooltip group-hover:tooltip-open"),p(b,"data-tip","If public, the world can see your profile"),p(D,"class","label-text mr-6"),p(R,"type","checkbox"),p(R,"class","toggle toggle-success"),R.checked=J=(v=l[5])==null?void 0:v.published,p(L,"class","label cursor-pointer flex items-start justify-center"),p(x,"class","form-control")},m(h,v){T(h,t,v),T(h,s,v),T(h,a,v),k(a,r),k(r,o),k(r,u),k(u,n),k(u,g),T(h,i,v),T(h,c,v),k(c,d),k(c,I),k(c,N),k(N,O),T(h,$,v),T(h,x,v),k(x,L),k(L,D),k(D,b),k(b,w),k(L,P),k(L,R),T(h,K,v),qt(z,h,v),T(h,rt,v),j.m(h,v),T(h,et,v),F=!0,pt||(vt=V(R,"change",l[12]),pt=!0)},p(h,v){var lt,W,st,nt,X;(!F||v&32)&&f!==(f=((lt=h[5])==null?void 0:lt.username)+"")&&Dt(g,f),(!F||v&32&&E!==(E=`/${(W=h[5])==null?void 0:W.username}`))&&p(u,"href",E),(!F||v&32&&M!==(M=`/${h[5].username}/bio`))&&p(N,"href",M),(!F||v&32)&&_!==(_=(st=h[5])!=null&&st.published?"Public profile":"Private profile")&&Dt(w,_),(!F||v&32&&J!==(J=(nt=h[5])==null?void 0:nt.published))&&(R.checked=J);const Q={};v&32&&(Q.list=(X=h[5])==null?void 0:X.links),v&83886080&&(Q.$$scope={dirty:v,ctx:h}),z.$set(Q),ot===(ot=kt(h))&&j?j.p(h,v):(j.d(1),j=ot(h),j&&(j.c(),j.m(et.parentNode,et)))},i(h){F||(H(z.$$.fragment,h),F=!0)},o(h){Y(z.$$.fragment,h),F=!1},d(h){h&&(m(t),m(s),m(a),m(i),m(c),m($),m(x),m(K),m(rt),m(et)),Ht(z,h),j.d(h),pt=!1,vt()}}}function Ne(l){let t,e,s,a,r="Delete",o,u,n;const f=[l[24]];let g={};for(let i=0;i<f.length;i+=1)g=Zt(g,f[i]);e=new ue({props:g});function E(){return l[14](l[24])}return{c(){t=y("div"),zt(e.$$.fragment),s=U(),a=y("button"),a.textContent=r,this.h()},l(i){t=C(i,"DIV",{class:!0});var c=S(t);Ft(e.$$.fragment,c),s=B(c),a=C(c,"BUTTON",{class:!0,"data-svelte-h":!0}),G(a)!=="svelte-1n5cbwc"&&(a.textContent=r),c.forEach(m),this.h()},h(){p(a,"class","btn btn-xs btn-error invisible group-hover:visible transition-all absolute -right-6 bottom-10"),p(t,"class","group relative")},m(i,c){T(i,t,c),qt(e,t,null),k(t,s),k(t,a),o=!0,u||(n=V(a,"click",E),u=!0)},p(i,c){l=i;const d=c&16777216?ce(f,[fe(l[24])]):{};e.$set(d)},i(i){o||(H(e.$$.fragment,i),o=!0)},o(i){Y(e.$$.fragment,i),o=!1},d(i){i&&m(t),Ht(e),u=!1,n()}}}function Re(l){let t,e="Add a Link",s,a;return{c(){t=y("button"),t.textContent=e,this.h()},l(r){t=C(r,"BUTTON",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-1l5hg7j"&&(t.textContent=e),this.h()},h(){p(t,"class","btn btn-outline btn-info block mx-auto my-4")},m(r,o){T(r,t,o),s||(a=V(t,"click",l[18]),s=!0)},p:q,d(r){r&&m(t),s=!1,a()}}}function Se(l){let t,e,s,a,r,o,u,n,f,g,E,i,c,d,A,I,N="Cancel",O,M,$=dt(l[7]),x=[];for(let _=0;_<$.length;_+=1)x[_]=Ut(Rt(l,$,_));let L=!l[0]&&Bt(),D=!l[1]&&Ot(),b=l[4]&&$t();return{c(){t=y("form"),e=y("select");for(let _=0;_<x.length;_+=1)x[_].c();s=U(),a=y("input"),r=U(),o=y("input"),u=U(),n=y("div"),L&&L.c(),f=U(),D&&D.c(),g=U(),b&&b.c(),E=U(),i=y("button"),c=Z("Add Link"),A=U(),I=y("button"),I.textContent=N,this.h()},l(_){t=C(_,"FORM",{class:!0});var w=S(t);e=C(w,"SELECT",{name:!0,class:!0});var P=S(e);for(let K=0;K<x.length;K+=1)x[K].l(P);P.forEach(m),s=B(w),a=C(w,"INPUT",{name:!0,type:!0,placeholder:!0,class:!0}),r=B(w),o=C(w,"INPUT",{name:!0,type:!0,placeholder:!0,class:!0}),u=B(w),n=C(w,"DIV",{class:!0});var R=S(n);L&&L.l(R),f=B(R),D&&D.l(R),g=B(R),b&&b.l(R),R.forEach(m),E=B(w),i=C(w,"BUTTON",{type:!0,class:!0});var J=S(i);c=tt(J,"Add Link"),J.forEach(m),A=B(w),I=C(w,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),G(I)!=="svelte-ptz3kb"&&(I.textContent=N),w.forEach(m),this.h()},h(){p(e,"name","icon"),p(e,"class","select select-sm"),l[2].icon===void 0&&ee(()=>l[15].call(e)),p(a,"name","title"),p(a,"type","text"),p(a,"placeholder","Title"),p(a,"class","input input-sm"),p(o,"name","url"),p(o,"type","text"),p(o,"placeholder","URL"),p(o,"class","input input-sm"),p(n,"class","my-4"),i.disabled=d=!l[4],p(i,"type","submit"),p(i,"class","btn btn-success block"),p(I,"type","button"),p(I,"class","btn btn-xs my-4"),p(t,"class","bg-base-200 p-6 w-full mx-auto rounded-xl")},m(_,w){T(_,t,w),k(t,e);for(let P=0;P<x.length;P+=1)x[P]&&x[P].m(e,null);Pt(e,l[2].icon,!0),k(t,s),k(t,a),at(a,l[2].title),k(t,r),k(t,o),at(o,l[2].url),k(t,u),k(t,n),L&&L.m(n,null),k(n,f),D&&D.m(n,null),k(n,g),b&&b.m(n,null),k(t,E),k(t,i),k(i,c),k(t,A),k(t,I),O||(M=[V(e,"change",l[15]),V(a,"input",l[16]),V(o,"input",l[17]),V(I,"click",l[13]),V(t,"submit",mt(l[10]))],O=!0)},p(_,w){if(w&128){$=dt(_[7]);let P;for(P=0;P<$.length;P+=1){const R=Rt(_,$,P);x[P]?x[P].p(R,w):(x[P]=Ut(R),x[P].c(),x[P].m(e,null))}for(;P<x.length;P+=1)x[P].d(1);x.length=$.length}w&132&&Pt(e,_[2].icon),w&132&&a.value!==_[2].title&&at(a,_[2].title),w&132&&o.value!==_[2].url&&at(o,_[2].url),_[0]?L&&(L.d(1),L=null):L||(L=Bt(),L.c(),L.m(n,f)),_[1]?D&&(D.d(1),D=null):D||(D=Ot(),D.c(),D.m(n,g)),_[4]?b||(b=$t(),b.c(),b.m(n,null)):b&&(b.d(1),b=null),w&16&&d!==(d=!_[4])&&(i.disabled=d)},d(_){_&&m(t),le(x,_),L&&L.d(),D&&D.d(),b&&b.d(),O=!1,Mt(M)}}}function Ut(l){let t,e=l[21]+"",s;return{c(){t=y("option"),s=Z(e),this.h()},l(a){t=C(a,"OPTION",{});var r=S(t);s=tt(r,e),r.forEach(m),this.h()},h(){t.__value=l[21].toLowerCase(),at(t,t.__value)},m(a,r){T(a,t,r),k(t,s)},p:q,d(a){a&&m(t)}}}function Bt(l){let t,e="Must have valid title";return{c(){t=y("p"),t.textContent=e,this.h()},l(s){t=C(s,"P",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-1clkdjx"&&(t.textContent=e),this.h()},h(){p(t,"class","text-error text-xs")},m(s,a){T(s,t,a)},d(s){s&&m(t)}}}function Ot(l){let t,e="Must have a valid URL";return{c(){t=y("p"),t.textContent=e,this.h()},l(s){t=C(s,"P",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-ckpz19"&&(t.textContent=e),this.h()},h(){p(t,"class","text-error text-xs")},m(s,a){T(s,t,a)},d(s){s&&m(t)}}}function $t(l){let t,e="Looks good!";return{c(){t=y("p"),t.textContent=e,this.h()},l(s){t=C(s,"P",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-18u4utf"&&(t.textContent=e),this.h()},h(){p(t,"class","text-success text-xs")},m(s,a){T(s,t,a)},d(s){s&&m(t)}}}function Ue(l){var a;let t,e,s=((a=l[5])==null?void 0:a.username)==l[6].params.username&&St(l);return{c(){t=y("main"),s&&s.c(),this.h()},l(r){t=C(r,"MAIN",{class:!0});var o=S(t);s&&s.l(o),o.forEach(m),this.h()},h(){p(t,"class","max-w-xl mx-auto")},m(r,o){T(r,t,o),s&&s.m(t,null),e=!0},p(r,[o]){var u;((u=r[5])==null?void 0:u.username)==r[6].params.username?s?(s.p(r,o),o&96&&H(s,1)):(s=St(r),s.c(),H(s,1),s.m(t,null)):s&&(bt(),Y(s,1,1,()=>{s=null}),gt())},i(r){e||(H(s),e=!0)},o(r){Y(s),e=!1},d(r){r&&m(t),s&&s.d()}}}function Be(l,t,e){let s,a,r,o,u,n,f;ut(l,de,b=>e(5,o=b)),ut(l,pe,b=>e(19,u=b)),ut(l,he,b=>e(6,f=b));const g=["Twitter","YouTube","TikTok","LinkedIn","GitHub","Custom"],E={icon:"custom",title:"",url:"https://"},i=ve(E);ut(l,i,b=>e(2,n=b));let c=!1;function d(b){const _=b.detail,w=ct(ft,"users",u.uid);_e(w,{links:_},{merge:!0})}async function A(b){const _=ct(ft,"users",u.uid);await _t(_,{links:me({...n,id:Date.now().toString()})}),i.set({icon:"",title:"",url:""}),e(3,c=!1)}async function I(b){const _=ct(ft,"users",u.uid);await _t(_,{links:be(b)})}async function N(b){const _=ct(ft,"users",u.uid);await _t(_,{published:!(o!=null&&o.published)})}function O(){i.set(E),e(3,c=!1)}const M=b=>I(b);function $(){n.icon=te(this),i.set(n),e(7,g)}function x(){n.title=this.value,i.set(n),e(7,g)}function L(){n.url=this.value,i.set(n),e(7,g)}const D=()=>e(3,c=!0);return l.$$.update=()=>{l.$$.dirty&4&&e(1,s=n.url.match(/^(ftp|http|https):\/\/[^ "]+$/)),l.$$.dirty&4&&e(0,a=n.title.length<20&&n.title.length>0),l.$$.dirty&3&&e(4,r=s&&a)},[a,s,n,c,r,o,f,g,i,d,A,I,N,O,M,$,x,L,D]}class qe extends Vt{constructor(t){super(),jt(this,t,Be,Ue,At,{})}}export{qe as component};
